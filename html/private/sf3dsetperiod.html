<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
<head>
<meta name="author of conversion perl script" content="Hartmut Pohlheim" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />

<meta name="description" content=" SF3DSETPERIOD Fija la frecuencia del dispositivo SF-3D " />
<meta name="keywords" content=" setperiod creasf3d " />
<title>Documentation of  sf3dsetperiod</title>
</head>
<body >
<h1 >Documentation of  sf3dsetperiod</h1>
<hr size="3" noshade="noshade" />

<p align="center">Global Index (<a href = "../indexsgf.html">short</a> | <a href = "../indexlgf.html">long</a>)
 | <a href="Contentsprivate.html">Local contents</a>
 | Local Index (<a href = "indexslfprivate.html">short</a> | <a href = "indexllfprivate.html">long</a>)
</p>

<hr size="3" noshade="noshade" />
<h2 >Function Synopsis</h2>
<pre>sf3d=sf3dsetperiod(sf3d)</pre>
<hr size="3" noshade="noshade" />
<h2 >Help text</h2>
<pre>
 SF3DSETPERIOD Fija la frecuencia del dispositivo SF-3D

 % SF3DSETPERIOD Fija la frecuencia del dispositivo SF_3D
 
 Syntax: sf3d=sf3dsetperiod(sf3d)
 
 Input parameters:  sf3d-&gt; Objeto codinformaci√≥n del dispositivo.

 Output parameters:
   sf3d-&gt; Es el mismo objeto de entrada que puede haber sido
               modificado durante la llamada.

 Examples:

 See also: <a class="mfun" href="../private/creasf3d.html">creasf3d</a>, <a class="mfun" href="../private/sf3dgotoconfig.html">sf3dgotoconfig</a>, <a class="mfun" href="../private/destruyesf3d.html">destruyesf3d</a>
</pre>
<hr size="3" noshade="noshade" />
<h2 >Cross-Reference Information</H2>
<table border="0" width="100%">
<tr align="left">
<th width="50%">This function calls</th>
<th width="50%">This function is called by</th>
</tr>
<tr valign="top"><td>
<ul>
<li><a class="mfun" href="../private/SetPeriod.html">SetPeriod</a></li>
</ul>
</td><td>
<ul>
<li><a class="mfun" href="../private/creasf3d.html">creasf3d</a></li>
</ul>
</td>
</tr>
</table>
<hr size="3" noshade="noshade" />
<h2 >Listing of function sf3dsetperiod</h2>
<pre>


function sf3d=sf3dsetperiod(sf3d)

freq=sf3d.freq;

if (sf3d.puerto.BytesAvailable&gt;0)
    disp(['&gt;&gt;&gt; AVISO: Se descartaran ' int2str(sf3d.puerto.BytesAvailable) ' datos']);
    fread(sf3d.puerto, sf3d.puerto.BytesAvailable,'uint8');
end
<em class="mcom">% Cuerpo del mensaje </em>
msg='3';
fwrite(sf3d.puerto,msg,'uint8','async');
<em class="mcom">% Se espera a recibir la contestacion</em>
[ack,cnt,msg]=fread(sf3d.puerto,78,'uint8');
if (~isempty(msg))
    disp(msg);
    error('no se ha recibido respuesta al comando <a class="mfun" href="../private/setperiod.html">setperiod</a>');
end
if (sf3d.puerto.BytesAvailable&gt;0)
    fread(sf3d.puerto, sf3d.puerto.BytesAvailable,'uint8');
end
ack=ack(end-10:end-1);<em class="mcom">%Me quedo con los 10 penultimos, que se parecen al resto de respuestas</em>
if ack(10)=='H'
    <em class="mcom">%solo dos cifras</em>
    frecuencia=str2double(char(ack(8:9)));
else
    <em class="mcom">%tres cifras</em>
    frecuencia=str2double(char(ack(8:10)));
end

while (frecuencia~=freq)
    if (frecuencia&gt;freq)
        msg='-';
    else
        msg='+';
    end
    fwrite(sf3d.puerto,msg,'uint8','async');
    <em class="mcom">% Se espera a recibir la contestacion</em>
    [ack,cnt,msg]=fread(sf3d.puerto,10,'uint8');
    if (~isempty(msg))
        disp(msg);
        error('no se ha recibido respuesta al comando <a class="mfun" href="../private/setperiod.html">setperiod</a>');
    end
    if (sf3d.puerto.BytesAvailable&gt;0)
        fread(sf3d.puerto, sf3d.puerto.BytesAvailable,'uint8');
    end
    if ack(8)=='H'
        <em class="mcom">%solo dos cifras</em>
        frecuencia=str2double(char(ack(6:7)));
    else
        <em class="mcom">%tres cifras</em>
        frecuencia=str2double(char(ack(6:8)));
    end
end

<em class="mcom">%Salimos del modo de frecuencia</em>
msg='x';
fwrite(sf3d.puerto,msg,'uint8','async');
[ack,cnt,msg]=fread(sf3d.puerto, 196,'uint8');
if (~isempty(msg))
        disp(msg);
        error('no se ha recibido respuesta al comando <a class="mfun" href="../private/setperiod.html">setperiod</a>');
end
if (sf3d.puerto.BytesAvailable&gt;0)
        fread(sf3d.puerto, sf3d.puerto.BytesAvailable,'uint8');
end
</pre>
<hr size="3" noshade="noshade" />
<!--navigate-->
<!--copyright-->
</body>
</html>
